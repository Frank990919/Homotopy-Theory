\label{secg}

We first give the following definitions:

\defn{
    A map $p:X\to S$ is called:
    \begin{enumerate}[i)]
        \item An \term{inner fibration} if it is in $\RLP\{\l^i[n]\to\d[n]\mid 0<i<n\}$;
        \item A \term{left fibration} if it is in $\RLP\{\l^i[n]\to\d[n]\mid 0\le i<n\}$;
        \item A \term{right fibration} if it is in $\RLP\{\l^i[n]\to\d[n]\mid 0<i\le n\}$.
    \end{enumerate}
}

An inner fibration is what we generally want a ``good functor'' between $\infty$-categories look like, since for every functor $F:\catC\to\catD$
between ordinary categories, $\N(F)$ is an inner fibration. On the other hand, left and right fibrations come from the previous section,
and the reader may verify that a functor $F:\catC\to\catD$ between ordinary categories is a left (or right) fibration if and only if
$\N(F)$ is.

We also shall give the following definition:

\defn{
    A map $i:A\to B$ is called:
    \begin{enumerate}[i)]
        \item An \term{inner anodyne extension} if it is in $\Cof\{\l^i[n]\to\d[n]\mid 0<i<n\}$;
        \item A \term{left anodyne extension} if it is in $\Cof\{\l^i[n]\to\d[n]\mid 0\le i<n\}$;
        \item A \term{right anodyne extension} if it is in $\Cof\{\l^i[n]\to\d[n]\mid 0<i\le n\}$.
    \end{enumerate}
}

\eg{
    By transfinite induction, one can easily show that $\{-\infty\}\hookrightarrow K^\tril$ is a left anodyne extension for every
    simplicial set $K$. Dually the map $\{\infty\}\hookrightarrow K^\trir$ is a right anodyne extension.
}

We will first study the stability properties of such maps under certain constructions.

\lem{
    Suppose $f:A\to A',g:B\to B'$ are cofibrations of simplicial sets. Suppose that $f$ is right anodyne or $g$ is left anodyne.
    Then the map $$(A\star B')\amalg_{A\star B}(A'\star B)\to A'\star B'$$ is inner anodyne.
}

\lem{
    Suppose $f:A\to A',g:B\to B'$ are cofibrations of simplicial sets. Suppose that $f$ is anodyne.
    Then the pushout product $$(A\star B')\amalg_{A\star B}(A'\star B)\to A'\star B'$$ is left anodyne.
    (The dual statement is left for the reader.)
}

We now deduce the following proposition.

\prop{
    Suppose $i:A\to B$ is a cofibration of simplicial sets, $p:B\to X$ is a map of simplicial sets, and $q:X\to S$
    is an inner fibration. Define $r=qp,r_0=ri,p_0=pi$. Then:
    \begin{enumerate}[i)]
        \item The induced map $X_{p/}\to X_{p_0/}\times_{S_{r_0/}}S_{r/}$ is a left fibration;
        \item If $q$ is a right fibration then the induced map $X_{p/}\to X_{p_0/}\times_{S_{r_0/}}S_{r/}$ is a Kan fibration;
        \item If $i$ is right anodyne then the induced map $X_{p/}\to X_{p_0/}\times_{S_{r_0/}}S_{r/}$ is a trivial fibration;
        \item If $i$ is anodyne and $q$ is a left fibration then the induced map $X_{p/}\to X_{p_0/}\times_{S_{r_0/}}S_{r/}$ is a trivial fibration.
    \end{enumerate} 
}

We may now deduce the following proposition mentioned in \ref{seci}:

\cor{[Part 1 of Proposition \ref{tagl}]
    Suppose $\catC$ is an $\infty$-category, $p:K\to\catC$ is a diagram in $\catC$. Then the projection $\catC_{p/}\to\catC$ 
    is a left fibration. In particular, $\catC_{p/}$ is an $\infty$-category.
}

We furthermore have the following propositions:

\prop{
    We define $$\begin{aligned}I&=\{\l^i[n]\to\d[n]\mid 0\le i<n\},\\
    I'&=\{(\p\d[n]\times\d[1])\amalg_{\p\d[n]\times\{0\}}(\d[n]\times\{0\})\to\d[n]\times\d[1]\mid n\ge 0\},\\
    I''&=\{(A\times\d[1])\amalg_{A\times\{0\}}(B\times\{0\})\to B\times\d[1]\mid n\ge 0,A\to B\text{ is a cofibration}\}.\end{aligned}$$
    Then $\Cof(I)=\Cof(I')=\Cof(I'')$.
}

\cor{
    The pushout product of any cofibration and left anodyne extension is a left anodyne extension.
}

\cor{
    For any cofibration $i$ and left fibration $p$, $p_{\squ}^i$ is a left fibration. If moreover $i$ is left anodyne,
    then $p$ is a trivial fibration.
}

\cor{\label{tago}
    A map $p:X\to S$ is a left fibration if and only if the induced map $$X^{\d[1]}\to X^{\{0\}}\times_{S^{\{0\}}}S^{\d[1]}$$
    is a trivial fibration.
}

\prop{
    We define $$\begin{aligned}I&=\{\l^i[n]\to\d[n]\mid 0<i<n\},\\
    I'&=\{(\p\d[n]\times\d[2])\amalg_{\p\d[n]\times\l^1[2]}(\d[n]\times\l^1[2])\to\d[n]\times\d[2]\mid n\ge 0\},\\
    I''&=\{(A\times\d[2])\amalg_{A\times\l^1[2]}(B\times\l^1[2])\to B\times\d[2]\mid n\ge 0,A\to B\text{ is a cofibration}\}.\end{aligned}$$
    Then $\Cof(I)=\Cof(I')=\Cof(I'')$.
}

\cor{
    The pushout product of any cofibration and inner anodyne extension is an inner anodyne extension.
}

\cor{
    For any cofibration $i$ and innder fibration $p$, $p_{\squ}^i$ is an inner fibration. If moreover $i$ is inner anodyne,
    then $p$ is a trivial fibration.
}

\cor{
    A map $p:X\to S$ is an inner fibration if and only if the induced map $$X^{\d[2]}\to X^{\l^1[2]}\times_{S^{\l^1[2]}}S^{\d[2]}$$
    is a trivial fibration.
}

We next establish some more properties enjoyed by left fibrations:

\prop{
    Suppose $p:\catC\to\catD$ is a left fibration, $f$ is a morphism in $\catC$ such that $p(f)$ is an equivalence.
    Then $f$ is an equivalence.
}

\prop{
    Suppose $p:\catC\to\catD$ is a left fibration, $y\in\catC$, $\overline{f}:\overline{x}\to p(y)$ is an equivalence in $\catD$.
    Then there exists a morphism $f$ in $\catC$ such that $p(f)=\overline f$.
}

Using these propositions, one can now deduce Proposition \ref{tagm} by noticing that 
$\l^0[n]\cong(\{0\}\star\d[n-2])\amalg_{\{0\}\star\p\d[n-2]}(\d[1]\star\p\d[n-2])$.

Now we come back to the Grothendieck construction to left fibrations. Suppose $p:X\to S$ is a left fibration. Then for every $s\in S$,
$X_s\to\{s\}$ is a left fibration, which means that $X_s$ is Kan complex, by Proposition \ref{tagn}. Moreover for any $f:s\to s'$
a $1$-simplex in $S$, the diagram $$\xymatrix{\{0\}\times X_s\ar[r]\ar[d]&X_s\ar[r]&X\ar[d]\\\d[1]\times X_s\ar[r]&\d[1]\ar[r]^f&S}$$
is commutative, and the left vertical map is a left anodyne extension. Thus this diagram obtains a lifting $\d[1]\times X_s\to X$,
and its restriction to $\{1\}\times X_s$ yields a map $f_!:X_s\to X_{s'}$, which is unique up to a contractible choice.
Moreover the following proposition holds:

\prop{
    The assignment $$S_0\ni s\mapsto X_s, S_1\ni f\mapsto f_!$$ determines a (covariant) functor from $\h S$ to $\cat{H}$.
}

This is a na\"ive view to the Grothendieck construction to left fibrations. However, this is not precise enough, since
this loses the information of higher morphisms. In the next section, we will introduce a functor called the straightening functor,
that keeps the information of higher morphisms, and we will study the properties of the straightening functor.

Now, in order to formulate a more precise relationship between left fibrations over a simplicial set $S$ and functors
from $S$ into spaces. it will be more convenient to form a model structure on the category $\cat{SSet}_{/S}$,
that classifies left fibrations over $S$. We will form a model structure on $\cat{SSet}_{/S}$ called the covariant model structure.

\defn{
    Suppose $f:X\to Y$ is a map in $\cat{SSet}_{/S}$. $f$ is called:
    \begin{itemize}
        \item A \term{covariant cofibration} if it is a cofibration in the standard model structure;
        \item A \term{covariant equivalence} if the map $X^\tril\amalg_{X}S\to Y^\tril\amalg_{Y}S$ is a categorical equivalence;
        \item A \term{covariant fibration} if it has RLP with respect to $\Cof\cap\operatorname{CovEq}$, where
        $\operatorname{CovEq}$ is the class of all covariant equivalences.
    \end{itemize}
}

We note that the simplicial set $X^\tril\amalg_{X}S$ can be regarded as the ``left mapping cone'' of the map $X\to S$, and naively
for any $s\in S$, the simplicial set $X_s^\tril\amalg_{X_s}\{s\}$ is some sort of ``suspension'' of $X_s$,
thus we expect that $\Map_{X^\tril\amalg_{X}S}(-\infty,s)=\Map_{X_s^\tril\amalg_{X_s}\{s\}}(-\infty,s)$
has the same homotopy type with $X_s$. Thus a map $X\to Y$ in $\cat{SSet}_{/S}$ is a covariant equivalence, is roughly equivalent to
$X_s\to Y_s$ is a homotopy equivalence for every $s\in S$. We will make this idea precise in the next section.

Now, we have the following proposition:

\prop{
    Suppose $S$ is a simplicial set. Then the class of covariant cofibrations, covariant equivalences and covarinat fibrations,
    form a left proper combinatorial model structure on $\cat{SSet}_{/S}$. The model structure is called the 
    \term{covariant model structure} on $\cat{SSet}_{/S}$, and will be written as $(\cat{SSet}_{/S},\text{Cov})$.
}

The proof of this proposition makes use of Theorem {\color{FF0000}\texttt{[ERROR! THEOREM NOT FOUND]}} (in Section \ref{secb}).
It also uses the fact that $(\cat{Cat}_{\cat{SSet}},\text{Std})$ is left proper and that
$\C$ takes cofibrations between simplicial sets to cofibrations between simplicial categories.
The following lemmas are also used in the proof of the proposition:

\lem{
    Suppose $S$ is a simplicial set. Every left anodyne map in $\cat{SSet}_{/S}$ is a covariant equivalence.
}

\lem{
    Suppose $p:X\to S$ is an arbitrary map of simplicial sets. Suppose more that $p$ has a section $s$ and
    $h\in\Hom_{\cat{SSet}_{/S}}(X\times\d[1],X)$ is a homotopy from $s\circ p=h|_{X\times\{0\}}$ to $\1=h|_{X\times\{1\}}$.
    Then $s$ is left anodyne.
}

Before we come to the next proposition, we first construct a closed $\cat{SSet}$-module structure on $\cat{SSet}_{/S}$. 
The structure functors $$\ox:\cat{SSet}_{/S}\times\cat{SSet}\to\cat{SSet}_{/S},\sHom_r:\cat{SSet}^\op\times\cat{SSet}_{/S}\to\cat{SSet}_{/S}$$
are easy to define: they are just the usual product and the usual exponential. The structure functor
$$\sHom_l:(\cat{SSet}_{/S})^\op\times\cat{SSet}_{/S}\to\cat{SSet}$$ is a bit different. We make the following definition:

\defn{
    Suppose $f:X\to S,g:Y\to S$ are two objects in $\cat{SSet}_{/S}$ for some simplicial set $S$. We define the \term{based exponential},
    $Y^X_S$, to be the pullback of the diagram $$Y^X\xrightarrow{g_*}S^X\hookleftarrow\{f\}.$$ We also define $\Hom_S(X,Y)$
    to be the set $\Hom_{\cat{SSet}_{/S}}(X,Y)$.
}

It is clear that the based exponential is functorial, and the usual product, the usual exponential and the based exponential
form a closed $\cat{SSet}$-module structure on $\cat{SSet}_{/S}$. 

We now have the following proposition, whose proof is not difficult using Proposition 
{\color{FF0000}\texttt{[ERROR! PROPOSITION NOT FOUND]}} (in Section \ref{secb}):

\prop{
    The model category $(\cat{SSet}_{/S},\text{Cov})$ is a simplicial model category, with respect to the standard model structure.
}

We now make some basic observations:

\prop{
    Suppose $S$ is a simplicial set. Every left anodyne extension is a trivial cofibration in $(\cat{SSet}_{/S},\text{Cov})$.
    Every covariant fibration in $\cat{SSet}_{/S}$ is a left fibration. Every fibrant object in $(\cat{SSet}_{/S},\text{Cov})$
    determines a left fibration $X\to S$.
}

In the next section, we will prove that the fibrant objects in $(\cat{SSet}_{/S},\text{Cov})$ are precisely the left fibrations
$X\to S$, and we will come up with more criterions to prove whether a map between fibrant objects in $(\cat{SSet}_{/S},\text{Cov})$
is a covariant equivalence or not.

We now show that the covariant model structure is functorial on the base $S$:

\prop{
    Suppose $j:S\to T$ is a map of simplicial sets. Consider the adjunction $(j_!,j^*):\cat{SSet}_{/S}\to\cat{SSet}_{/T}$,
    where $j_!(X\to S)=(X\to S\to T)$, and $j^*(X\to T)=(X\times_TS\to S)$. Then $$(j_!,j^*):(\cat{SSet}_{/S},\text{Cov})
    \to(\cat{SSet}_{/T},\text{Cov})$$ is a Quillen adjunction.
}

The proof can be done by using the fact that $(\cat{Cat}_{\cat{SSet}},\text{Std})$ is left proper and that
$\C$ takes cofibrations between simplicial sets to cofibrations between simplicial categories.

We will prove in the next section that this Quillen adjunction is a Quillen equivalence whenever $j$ is a categorical equivalence.

\rmk{
    Taking the dual construction, we may obtain the \term{contravariant model structure} on $\cat{SSet}_{/S}$,
    where a map $f:X\to Y$ in $\cat{SSet}_{/S}$ is called:
    \begin{itemize}
        \item A \term{contravariant cofibration} if it is a cofibration in the standard model structure;
        \item A \term{contravariant equivalence} if the map $X^\trir\amalg_{X}S\to Y^\trir\amalg_{Y}S$ is a categorical equivalence;
        \item A \term{contravariant fibration} if it has RLP with respect to $\Cof\cap\operatorname{ContrvEq}$, where
        $\operatorname{ContrvEq}$ is the class of all covariant equivalences.
    \end{itemize}
    This model structure will be written as $(\cat{SSet}_{/S},\text{Contrv})$.
}

We conclude this section with a criterion to decide whether a left fibration is a Kan fibration or not. By the above discussions,
a left fibration $p:X\to S$ determines a morphism $f_!:X_s\to X_{s'}$ for any $1$-simplex $f:s\to s'\in S$. If $p$ is a Kan fibration,
then the same argument allows us to form a map $f^!:X_{s'}\to X_{s}$ that is a homotopy inverse to $f_!$. To the converse, we have 
the following proposition:

\prop{
    Suppose $p:X\to S$ is a left fibration. The following conditions are equivalent:
    \begin{enumerate}[i)]
        \item $p$ is a Kan fibration;
        \item For any $1$-simplex $f:s\to s'\in S$, the map $f_!:X_s\to X_{s'}$ is an isomorphism in $\cat{H}$.
    \end{enumerate}
}

The main idea of the proof, is to show that $p$ is a right fibration, and use the dual of Corollary \ref{tago} to proceed.
For details, we refer to [Lurie HTT, Section 2.1.3]. The following lemmas are also used in the proof of the proposition,
and also has a lot of usage in the future:

\lem{
    Suppose $p:X\to S$ is a left fibration such that $S$ is a Kan complex. Then $p$ is a Kan fibration.
}

\lem{
    Suppose $p:X\to S$ is a left fibration such that $X_s$ is contractible for every $s\in S$. Then $p$ is a trivial fibration.
}

Note that in the proof of the second lemma, we pullback the fibration along the map $\d[n]\to S$ and are reduced
to the case where $S=\d[n]$. This is a very useful strategy and will be used over and over in the next sections.